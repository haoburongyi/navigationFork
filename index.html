<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="description" content="zh navigation"/>
    <link rel="shortcut icon" href="static/logo.svg" type="image/x-icon">
    <meta name="keywords" content="zh navigation" />
    <title>zh navigation</title>
    <link rel="shortcut icon" href="favcion.ico" />
    <link rel="stylesheet" href="static/style.css">
    <link rel="stylesheet" href="static/themify-icons.css">
</head>

<body>
    <div class="container" id="container">
        <aside class="left-bar" id="leftBar">
            <!-- Left sidebar content -->
        </aside>
        <section class="main">
            <div id="mainContent">
                <!-- 手机端菜单 -->
                <div id="menu">
                    <a href="#"><i class="ti-menu-alt"></i></a>
                </div>
                <!-- 搜索框替代说明 -->
                <div class="about box">
                    <input type="text" id="searchBox" placeholder="搜索网站..." autofocus>
                    <div id="suggestions" class="suggestions"></div>
                </div>

                <!-- Footer and other content -->

                <footer class="footer">
                    <!-- Footer content -->
                </footer>
            </div>
        </section>

        <script src="static/jquery.js"></script>
        <script>
            // 读取JSON数据并初始化
            let sites = [];
            $(document).ready(function() {
                $.getJSON("static/nav.json", function(data) {
                    sites = data.sites;
                });

                // 监听输入框键盘事件
                $('#searchBox').on('input', function() {
                    const query = $(this).val().toLowerCase();
                    const matches = sites.filter(site => 
                        site.name.toLowerCase().includes(query) || 
                        site.href.toLowerCase().includes(query)
                    );
                    showSuggestions(matches);
                });

                $('#searchBox').on('keydown', function(e) {
                    if (e.key === 'Enter') {
                        const query = $(this).val().toLowerCase();
                        const matches = sites.filter(site => 
                            site.name.toLowerCase().includes(query) || 
                            site.href.toLowerCase().includes(query)
                        );
                        if (matches.length === 1) {
                            window.location.href = matches[0].href;
                        } else if (matches.length > 1) {
                            // 如果有多个匹配项，显示下拉框
                            showSuggestions(matches);
                        }
                    }
                });
            });

            // 显示下拉建议
            function showSuggestions(matches) {
                const suggestions = $('#suggestions');
                suggestions.empty();
                if (matches.length > 0) {
                    matches.forEach(match => {
                        suggestions.append(`<div class="suggestion-item">${match.name} - ${match.href}</div>`);
                    });
                }
            }
        </script>
    </div>
</body>

</html>
